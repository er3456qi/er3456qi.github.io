---
layout: post
title: "敬而远之的动态规划学习记录"
date: 2018-9-17 21:07:21
category: programming
tags: algorithms leetcode
finished: false
---

最近有在刷leetcode，因为大学的时候只关注各种技术和项目实现，没有参加过acm，对于一些算法方面的问题（尤其是动态规划类题目）训练很少，初刷leetcode题目还是感觉有些吃力。

动态规划，几乎所有的oj类题目都有涉及，一直以来，我看到都是敬而远之的，因为觉得难，连了解都不想了解。但是因为不会，每次遇到都会被绊倒，就像一块巨石，一直堵在路上，不能让人前进更远。所以现在决定把这块石头搬掉。在本文里记录一些学习动态规划过程中的心得（可能会不定时更新）。

## 什么是动态规划

百科里的解释是：

>动态规划算法通常用于求解具有某种最优性质的问题。在这类问题中，可能会有许多可行解。每一个解都对应于一个值，我们希望找到具有最优值的解。

提到动态规划，很多人都会说最优子结构、无后效性、状态、记忆等，这些其实我说不清楚，建议看下文末的分享的知乎上的回答。

我个人感觉，动态规划的问题像是让你在一棵多叉树中找到一条达到目的的最优路径，多叉树的每个节点都有相同的子节点。就是说，你的每一步都有多个选择，并且每一步的多个选择都是一样的。再多说一点，如果你每一步的决策是对的，那么它不会影响后面的决策，否则后面的决策肯定是错的。


## 与贪心算法的区别

动态规划和贪心算法都是在找最优解，虽然它们都是一步一步求解，但它们的每一步的目标并不一样。

动态规划的方式是，“**把每天都当成是末日来相待**”。换句话说就是动态规划把每一步都当成是最后一步，这时候它考虑的是现在是最后一步了，怎么样能达到全局最优的目的。至于到底怎样才能达到全局最优的目的，这个要结合前面的末日情况和题目要求。

而贪心算法的方式是，“**把每天都当成是新生来相待**”。贪心算法并不对过去有太多了解，它只关注我当前这一步怎么走是最优的（至于这个最优是不是全局最优，我并不关心），然后后面每一步都选择其可选方案中最优的一个，然后走到一直选最优的直至结束。

也可以说，动态规划的方法目光比较长远，而贪心算法目光比较短浅（并无贬义的意思）。或者说它们在每一步做决策的思路不同。

拿大家都举的拿到指定金额所需最小金币数的例子来说，有一元、三元、四元面值的金币，问取n元钱最少需要几个金币？

动态规划方法：假设`n == 1`，怎么拿？然后`n == 2`，怎么拿？若`n == k`呢？我们知道，每拿一枚金币，都有三种选择：拿一元、拿三元、拿四元。令`p[n]`为取`n`元需要的金币数，当`n == k`时，如果最后拿的金币是一元，那么这个时候拿的金币数应该是`p(k) = p(k-1) + 1`，也就是如果已经拿了`k-1`元了，那么再拿一个一元的即可；同样的，如果最后拿的金币是三元，那么`p(k) = p(k-3) + 1`，也就是如果已经拿了`k-3`元了，那么再拿一个三元的即可；同理，如果最后拿的金币是四元，那么`p(k) = p(k-4) + 1`。现在`p(k)`有三个备选值，选哪个呢？因为题目要求是取最少个，所以`p(k) = min(p(k-1), p(k-3), p(k-4)) + 1`。因为每一个n的选取都是选最少金币数的，所以最终的`p(n)`一定是金币最少的。结果是全局最优的。

贪心算法方法：贪心算法要带着一个思想，就是目标金额越小，所需钱币应该越少。所以每一步选金币的时候应该选能让剩下的目标金额最小的情况，即选备选金币中的面值最大的一个。至于最终结果，是不是全局最优，不一定。

假设，`n==4`，按动态规划方法：
```python
p[0]=0  #（初始情况）
p[1] = p[1-1] + 1  # 1
p[2] == p[2-1] + 1  # 2
p[3] = min(p[3-3], p[3-1]) + 1  # 1
p[4] = min(p[4-4], p[4-3], p[4-1]) + 1  # 1
```

贪心算法：
```python
money = [1, 3, 4]
p = 0
while n:  # n不等于0时循环
    n -= max([i for i in money if i <= n])  # 每次选能选的面值最大的
    p += 1
```

可以看到，当`n==4`时，两个方法最终结果都是`1`，即最优解。
但如果`n==6`时呢？`n==6`，动态规划方法会选出两个三元，而贪心算法会选出四元、一元、一元共三个金币。这时候贪心算法并没有得到最优解。


## 最后

分享知乎上关于动态规划的[讲解][dp]。


[dp]:https://www.zhihu.com/question/23995189