---
layout: post
title: "Dart 语言快速入门-类（中篇）"
date: 2018-10-5 14:32:21
category: programming
tags: dart
finished: true
---

这一篇是对上篇中一些内容的补充。

## 构造方法

因为 Dart 的构造方法比较特别，所以这里特别重述以下几点，需要明确：

**当不显式定义构造方法时，编译器自动提供一个默认构造方法，该默认构造方法无参，并且会自动调用父类的无参构造方法。**

**非命名构造方法只允许有一个（即不允许构造方法重载），想要定义多个构造方法请用命名构造方法。**

**默认的，所有构造方法都会自动调用父类的无参构造方法。**

**如果父类没有无参构造方法但有有参的构造方法（此时不会自动生成默认构造方法），那么子类的构造方法需要手动指明调用哪个父类的构造方法。**

**也就是说，子类的构造方法必须要调用一个父类的构造方法。当父类有无参构造方法时，会自动调用父类的无参构造方法；否则，需要手动指明调用哪个父类的构造方法。**

下面给出一段代码作为例子：

```dart
// 无显式默认构造方法，编译器自动提供
class A {

}

// 有无参构造方法
class B {
    B() {
        print('B');
    }
}

// 有显式定义的构造方法，但无默认构造方法，编译器不提供
class C {
    C(int c) {
        print('C: $c');
    }
}

// 定义了两个非命名构造方法，错误
class D {
    D() {
        print('D');
    }
    D(int d) {  // 错误，默认的构造方法已经定义
        print('D: $d');
    }
}

// 所有构造方法都会自动调用父类的无参构造方法
class E extends B{
    E() {
        print('E');
    }
    E.origin() {
        print('E.origin');
    }
}
void main () {
    var e1 = E();  // print "B \n E"
    var e2 = E.origin();  // print "B \n E.origin"
}

// 所有构造方法都会自动调用父类的无参构造方法，出现错误
class F extends C{
    F() {  // 错误，父类C没有无参构造函数
        print('F');
    }
    /* 上面的构造方法改为下面这个即可（显式指定调用哪个父类构造方法）
    F():super(2) {
        print('F');
    }
    */
}
```

其实， `Dart` 的构造方法有些地方和 `Java` 的类似，比如 `Java` 也会在类没有默认构造方法的时候自动生成一个，每个构造方法都会隐式地（如果没有显式调用的话）调用 `super()` 。

